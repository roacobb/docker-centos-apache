{"name":"Docker-centos-apache","tagline":"","body":"# Prerequisites \r\n\r\nThis assumes that you have downloaded Vagrant (www.vagrantup.com), Oracle VM VirtualBox \r\n(www.virtualbox.org), and Docker (www.docker.io). \r\n\r\n# Starting your VM\r\n\r\n  Create Vagrant Directory and switch to that directory  \r\n```\r\n  $mkdir ~/vagrant\r\n  $cd ~/vagrant \r\n```\r\n\r\n  Place the Vagrantfile here and create a htdocs directory parallel to that file\r\n```\r\n  $touch Vagrantfile #place code from this repo here\r\n  $mkdir htdocs\r\n```\r\n\r\n  Switch to htdocs directory and create a index.html file\r\n```\r\n  $cd htdocs\r\n  $touch index.html #place code from this repo here\r\n```\r\n\r\n  Switch back to ~/vagrant and vagrant up after that ssh into your VM\r\n```\r\n  $cd ..\r\n  $vagrant up\r\n  $vagrant ssh\r\n```\r\n\r\n  Install Docker\r\n```\r\n  $sudo yum -y update #Update installed packages\r\n  $sudo yum -y install docker-io #Installing Docker\r\n  $sudo service docker start #Starting Docker\r\n```\r\n\r\n# Building your Docker image and starting Apache (remain inside vagrant ssh) \r\n\r\n  Create Docker directory and add Dockerfile \r\n```\r\n  $mkdir Docker\r\n  $cd Docker\r\n  $touch Dockerfile #place code from repo here\r\n```\r\n\r\n  Build your first Docker container image while in Docker directory\r\n```\r\n  $sudo docker build -t myimage/base . #This will create an image called myimage/base \r\n                                           in the current directory\r\n```\r\n\r\n  Create a file called supervisord.conf in current directory  \r\n```\r\n  $touch supervisord.conf #Place contents of file in repo here\r\n```\r\n\r\n Change contents of Dockerfile to reflect installing http server\r\n```\r\n  FROM myimage/base\r\n  RUN yum -y install httpd\r\n  ADD supervisord.conf /etc/supervisord.conf\r\n  EXPOSE 22 80 \r\n  CMD [\"/usr/bin/supervisord\"]\r\n```\r\n\r\n Build another Docker image to reflect http server layer\r\n```\r\n $sudo docker build -t -i myimage/httpd . #This creates an image called myimage/httpd\r\n```\r\n\r\n Run the http server \r\n```\r\n $sudo docker run -p 80:80 -v /vagrant/htdocs:/var/www/html -t -i myimage/httpd\r\n```\r\n\r\n# Open a browser and test \r\n\r\n Go to http://localhost:8080 in your browser\r\n\r\n \r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}